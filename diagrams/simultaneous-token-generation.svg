<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="423px" preserveAspectRatio="none" style="width:481px;height:423px;" version="1.1" viewBox="0 0 481 423" width="481px" zoomAndPan="magnify"><defs><filter height="300%" id="f12txx8kg84tcz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><filter height="1" id="b12txx8kg84tcz0" width="1" x="0" y="0"><feFlood flood-color="#008000" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter><filter height="1" id="b12txx8kg84tcz1" width="1" x="0" y="0"><feFlood flood-color="#0000FF" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="316.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54.5" y="48.4883"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="148.5" y="69.7988"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="236.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="128.4199"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="177.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="410.5" y="157.7305"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="134.5527" style="stroke: #000000; stroke-width: 2.0;" width="457" x="13" y="172.7305"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="59" x2="59" y1="38.4883" y2="382.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="153" x2="153" y1="38.4883" y2="382.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="317" x2="317" y1="38.4883" y2="382.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="415" x2="415" y1="38.4883" y2="382.9043"/><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="30" y="23.5352">Browser</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="23" y="381.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="30" y="402.4395">Browser</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="109" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="116" y="23.5352">Backend A</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="109" y="381.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="116" y="402.4395">Backend A</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="274" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="281" y="23.5352">Backend B</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="274" y="381.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="281" y="402.4395">Backend B</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="371" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="378" y="23.5352">Backend C</text><rect fill="#FEFECE" filter="url(#f12txx8kg84tcz)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="371" y="381.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="378" y="402.4395">Backend C</text><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="316.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="54.5" y="48.4883"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="148.5" y="69.7988"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="236.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="312.5" y="128.4199"/><rect fill="#FFFFFF" filter="url(#f12txx8kg84tcz)" height="177.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="410.5" y="157.7305"/><polygon fill="#A80036" points="136.5,65.7988,146.5,69.7988,136.5,73.7988,140.5,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="142.5" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="71.5" y="65.0566">GET /page</text><polygon fill="#A80036" points="75.5,95.1094,65.5,99.1094,75.5,103.1094,71.5,99.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="152.5" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="81.5" y="94.3672">Page</text><polygon fill="#A80036" points="300.5,124.4199,310.5,128.4199,300.5,132.4199,304.5,128.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="306.5" y1="128.4199" y2="128.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="71.5" y="123.6777">GET /app-b/dynamic-component-x</text><polygon fill="#A80036" points="398.5,153.7305,408.5,157.7305,398.5,161.7305,402.5,157.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="404.5" y1="157.7305" y2="157.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="71.5" y="152.9883">GET /app-c/dynamic-component-y</text><path d="M13,172.7305 L157,172.7305 L157,179.7305 L147,189.7305 L13,189.7305 L13,172.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="134.5527" style="stroke: #000000; stroke-width: 2.0;" width="457" x="13" y="172.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="28" y="186.2988">Race condition</text><polygon fill="#A80036" points="75.5,207.3516,65.5,211.3516,75.5,215.3516,71.5,211.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="311.5" y1="211.3516" y2="211.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="81.5" y="206.6094">Set-Cookie: token=</text><text fill="#FFFFFF" filter="url(#b12txx8kg84tcz0)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="206.5" y="206.6094">BBB</text><polygon fill="#A80036" points="75.5,236.6621,65.5,240.6621,75.5,244.6621,71.5,240.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="409.5" y1="240.6621" y2="240.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="81.5" y="235.9199">Set-Cookie: token=</text><text fill="#FFFFFF" filter="url(#b12txx8kg84tcz1)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="206.5" y="235.9199">CCC</text><polygon fill="#A80036" points="75.5,265.9727,65.5,269.9727,75.5,273.9727,71.5,269.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="409.5" y1="269.9727" y2="269.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="81.5" y="265.2305">Set-Cookie: checksum=</text><text fill="#FFFFFF" filter="url(#b12txx8kg84tcz1)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="234.5" y="265.2305">YYY</text><polygon fill="#A80036" points="75.5,295.2832,65.5,299.2832,75.5,303.2832,71.5,299.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="311.5" y1="299.2832" y2="299.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="81.5" y="294.541">Set-Cookie: checksum=</text><text fill="#FFFFFF" filter="url(#b12txx8kg84tcz0)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="234.5" y="294.541">XXX</text><polygon fill="#A80036" points="75.5,331.5938,65.5,335.5938,75.5,339.5938,71.5,335.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69.5" x2="414.5" y1="335.5938" y2="335.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="81.5" y="330.8516">Dynamic component Y</text><polygon fill="#A80036" points="70.5,360.9043,60.5,364.9043,70.5,368.9043,66.5,364.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="64.5" x2="316.5" y1="364.9043" y2="364.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="76.5" y="360.1621">Dynamic component X</text><!--
@startuml
participant Browser
participant "Backend A"
participant "Backend B"
participant "Backend C"

activate Browser

Browser -> "Backend A": GET /page
activate "Backend A"
"Backend A" - -> Browser: Page
deactivate "Backend A"

Browser -> "Backend B": GET /app-b/dynamic-component-x
activate "Backend B"

Browser -> "Backend C": GET /app-c/dynamic-component-y
activate "Backend C"


group Race condition
    "Backend B" - -> Browser: Set-Cookie: token=<back:green><color:white>BBB</color></back>

    "Backend C" - -> Browser: Set-Cookie: token=<back:blue><color:white>CCC</color></back>

    "Backend C" - -> Browser: Set-Cookie: checksum=<back:blue><color:white>YYY</color></back>

    "Backend B" - -> Browser: Set-Cookie: checksum=<back:green><color:white>XXX</color></back>
end

"Backend C" - -> Browser: Dynamic component Y
deactivate "Backend C"


"Backend B" - -> Browser: Dynamic component X
deactivate "Backend B"


deactivate Browser
@enduml

PlantUML version 1.2018.06(Mon May 21 12:34:53 CEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>