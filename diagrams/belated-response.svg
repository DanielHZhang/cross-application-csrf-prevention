<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1033px" preserveAspectRatio="none" style="width:931px;height:1033px;" version="1.1" viewBox="0 0 931 1033" width="931px" zoomAndPan="magnify"><defs><filter height="300%" id="f15mcn7bku5w11" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><filter height="1" id="b15mcn7bku5w110" width="1" x="0" y="0"><feFlood flood-color="#008000" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter><filter height="1" id="b15mcn7bku5w111" width="1" x="0" y="0"><feFlood flood-color="#0000FF" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="693.0742" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219.5" y="235.041"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="810.3164" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="496.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="590.5" y="147.1094"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="118.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="762.5" y="293.6621"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="762.5" y="833.1836"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="362.3477" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="860.5" y="352.2832"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="326.0371" style="stroke: #000000; stroke-width: 2.0;" width="746" x="174" y="544.457"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.4883" y2="946.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="224" x2="224" y1="86.4883" y2="946.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="501" x2="501" y1="86.4883" y2="946.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="595" x2="595" y1="86.4883" y2="946.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="767" x2="767" y1="86.4883" y2="946.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="865" x2="865" y1="86.4883" y2="946.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="83.5352">User</text><ellipse cx="26.5" cy="13" fill="#FEFECE" filter="url(#f15mcn7bku5w11)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,21 L26.5,48 M13.5,29 L39.5,29 M26.5,48 L13.5,63 M26.5,48 L39.5,63 " fill="none" filter="url(#f15mcn7bku5w11)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="958.6504">User</text><ellipse cx="26.5" cy="971.6035" fill="#FEFECE" filter="url(#f15mcn7bku5w11)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,979.6035 L26.5,1006.6035 M13.5,987.6035 L39.5,987.6035 M26.5,1006.6035 L13.5,1021.6035 M26.5,1006.6035 L39.5,1021.6035 " fill="none" filter="url(#f15mcn7bku5w11)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="184" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="191" y="71.5352">Frontend</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="184" y="945.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="191" y="965.6504">Frontend</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="465" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="472" y="71.5352">Browser</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="465" y="945.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="472" y="965.6504">Browser</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="551" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="558" y="71.5352">Backend A</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="551" y="945.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="558" y="965.6504">Backend A</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="724" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="731" y="71.5352">Backend B</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="724" y="945.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="731" y="965.6504">Backend B</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="821" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="828" y="71.5352">Backend C</text><rect fill="#FEFECE" filter="url(#f15mcn7bku5w11)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="821" y="945.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="828" y="965.6504">Backend C</text><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="693.0742" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219.5" y="235.041"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="810.3164" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="496.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="590.5" y="147.1094"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="118.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="762.5" y="293.6621"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="762.5" y="833.1836"/><rect fill="#FFFFFF" filter="url(#f15mcn7bku5w11)" height="362.3477" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="860.5" y="352.2832"/><polygon fill="#A80036" points="484.5,113.7988,494.5,117.7988,484.5,121.7988,488.5,117.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="490.5" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="33.5" y="113.0566">Open /page</text><polygon fill="#A80036" points="578.5,143.1094,588.5,147.1094,578.5,151.1094,582.5,147.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="584.5" y1="147.1094" y2="147.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="513.5" y="142.3672">GET /page</text><polygon fill="#A80036" points="517.5,172.4199,507.5,176.4199,517.5,180.4199,513.5,176.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="511.5" x2="594.5" y1="176.4199" y2="176.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="523.5" y="171.6777">Page</text><polygon fill="#A80036" points="235.5,201.7305,225.5,205.7305,235.5,209.7305,231.5,205.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229.5" x2="495.5" y1="205.7305" y2="205.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="241.5" y="200.9883">Render</text><polygon fill="#A80036" points="37.5,231.041,27.5,235.041,37.5,239.041,33.5,235.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="31.5" x2="218.5" y1="235.041" y2="235.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="43.5" y="230.2988">Ready</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="484.5" y1="264.3516" y2="260.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="484.5" y1="264.3516" y2="268.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="495.5" y1="264.3516" y2="264.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="236.5" y="259.6094">Load Dynamic Component X</text><polygon fill="#A80036" points="750.5,289.6621,760.5,293.6621,750.5,297.6621,754.5,293.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="756.5" y1="293.6621" y2="293.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="513.5" y="288.9199">GET /app-b/dynamic-component-x</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="484.5" y1="322.9727" y2="318.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="484.5" y1="322.9727" y2="326.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="495.5" y1="322.9727" y2="322.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="236.5" y="318.2305">Load Dynamic Component Y</text><polygon fill="#A80036" points="848.5,348.2832,858.5,352.2832,848.5,356.2832,852.5,352.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="854.5" y1="352.2832" y2="352.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="513.5" y="347.541">GET /app-c/dynamic-component-y</text><polygon fill="#A80036" points="517.5,408.2148,507.5,412.2148,517.5,416.2148,513.5,412.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="511.5" x2="766.5" y1="412.2148" y2="412.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="523.5" y="376.8516">Dynamic Component X</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="523.5" y="392.1621">Set cookie token=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w110)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="638.5" y="392.1621">BBB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="523.5" y="407.4727">Set cookie checksum=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w110)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="666.5" y="407.4727">XXX</text><polygon fill="#A80036" points="240.5,437.5254,230.5,441.5254,240.5,445.5254,236.5,441.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234.5" x2="495.5" y1="441.5254" y2="441.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="246.5" y="436.7832">Render Dynamic Component X</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="36.5" y1="470.8359" y2="466.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="36.5" y1="470.8359" y2="474.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="26.5" x2="218.5" y1="470.8359" y2="470.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="43.5" y="466.0938">Component X ready</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="207.5" y1="500.1465" y2="496.1465"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="207.5" y1="500.1465" y2="504.1465"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="218.5" y1="500.1465" y2="500.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="33.5" y="495.4043">Fill in Component X data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="207.5" y1="529.457" y2="525.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="207.5" y1="529.457" y2="533.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="218.5" y1="529.457" y2="529.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="33.5" y="524.7148">Save Component X</text><path d="M174,544.457 L318,544.457 L318,551.457 L308,561.457 L174,561.457 L174,544.457 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="326.0371" style="stroke: #000000; stroke-width: 2.0;" width="746" x="174" y="544.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="189" y="558.0254">Race condition</text><polygon fill="#A80036" points="484.5,579.0781,494.5,583.0781,484.5,587.0781,488.5,583.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="490.5" y1="583.0781" y2="583.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="236.5" y="578.3359">Load the token cookie</text><polygon fill="#A80036" points="240.5,608.3887,230.5,612.3887,240.5,616.3887,236.5,612.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234.5" x2="495.5" y1="612.3887" y2="612.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="246.5" y="607.6465">Token=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w110)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="295.5" y="607.6465">BBB</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="271.5" y1="641.6992" y2="641.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271.5" x2="271.5" y1="641.6992" y2="654.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="271.5" y1="654.6992" y2="654.6992"/><polygon fill="#A80036" points="240.5,650.6992,230.5,654.6992,240.5,658.6992,236.5,654.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="236.5" y="636.957">Set request header: token=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w110)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="406.5" y="636.957">BBB</text><polygon fill="#A80036" points="517.5,710.6309,507.5,714.6309,517.5,718.6309,513.5,714.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="511.5" x2="864.5" y1="714.6309" y2="714.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="523.5" y="679.2676">Dynamic Component Y</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="523.5" y="694.5781">Set cookie token=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w111)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="638.5" y="694.5781">CCC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="523.5" y="709.8887">Set cookie checksum=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w111)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="666.5" y="709.8887">YYY</text><polygon fill="#A80036" points="240.5,739.9414,230.5,743.9414,240.5,747.9414,236.5,743.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234.5" x2="495.5" y1="743.9414" y2="743.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="246.5" y="739.1992">Render Dynamic Component Y</text><polygon fill="#A80036" points="484.5,769.252,494.5,773.252,484.5,777.252,488.5,773.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="490.5" y1="773.252" y2="773.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="236.5" y="768.5098">Request saving Dynamic Component X</text><polygon fill="#A80036" points="750.5,829.1836,760.5,833.1836,750.5,837.1836,754.5,833.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506.5" x2="756.5" y1="833.1836" y2="833.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="513.5" y="797.8203">POST /app-b/dynamic-component-x</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="513.5" y="813.1309">Set header token=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w110)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="628.5" y="813.1309">BBB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="513.5" y="828.4414">Set cookie checksum=</text><text fill="#FFFFFF" filter="url(#b15mcn7bku5w111)" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="656.5" y="828.4414">YYY</text><polygon fill="#A80036" points="517.5,858.4941,507.5,862.4941,517.5,866.4941,513.5,862.4941" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="511.5" x2="766.5" y1="862.4941" y2="862.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="523.5" y="857.752">400 Bad Request</text><polygon fill="#A80036" points="240.5,894.8047,230.5,898.8047,240.5,902.8047,236.5,898.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234.5" x2="495.5" y1="898.8047" y2="898.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="246.5" y="894.0625">Saving Dynamic Component X failed</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="36.5" y1="928.1152" y2="924.1152"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="36.5" y1="928.1152" y2="932.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="26.5" x2="223.5" y1="928.1152" y2="928.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="43.5" y="923.373">Saving Component X failed</text><!--
@startuml
actor User
participant Frontend
participant Browser
participant "Backend A"
participant "Backend B"
participant "Backend C"

User -> Browser: Open /page
activate Browser

Browser -> "Backend A": GET /page
activate "Backend A"
"Backend A" - -> Browser: Page
deactivate "Backend A"
Browser - -> Frontend: Render
Frontend - -> User: Ready

activate Frontend
Frontend ->> Browser: Load Dynamic Component X
Browser -> "Backend B": GET /app-b/dynamic-component-x
activate "Backend B"

Frontend ->> Browser: Load Dynamic Component Y
Browser -> "Backend C": GET /app-c/dynamic-component-y
activate "Backend C"

"Backend B" - -> Browser: Dynamic Component X\nSet cookie token=<back:green><color:white>BBB</color></back>\nSet cookie checksum=<back:green><color:white>XXX</color></back>
deactivate "Backend B"

Browser - -> Frontend: Render Dynamic Component X
Frontend - ->> User: Component X ready

User ->> Frontend: Fill in Component X data
User ->> Frontend: Save Component X

group Race condition

Frontend -> Browser: Load the token cookie
Browser - -> Frontend: Token=<back:green><color:white>BBB</color></back>
Frontend -> Frontend: Set request header: token=<back:green><color:white>BBB</color></back>

"Backend C" - -> Browser: Dynamic Component Y\nSet cookie token=<back:blue><color:white>CCC</color></back>\nSet cookie checksum=<back:blue><color:white>YYY</color></back>
deactivate "Backend C"
Browser - -> Frontend: Render Dynamic Component Y

Frontend -> Browser: Request saving Dynamic Component X
Browser -> "Backend B": POST /app-b/dynamic-component-x\nSet header token=<back:green><color:white>BBB</color></back>\nSet cookie checksum=<back:blue><color:white>YYY</color></back>
activate "Backend B"
"Backend B" - -> Browser: 400 Bad Request
deactivate "Backend B"
end

Browser - -> Frontend: Saving Dynamic Component X failed
Frontend - ->> User: Saving Component X failed

deactivate Browser
deactivate Frontend
@enduml

PlantUML version 1.2018.06(Mon May 21 12:34:53 CEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>