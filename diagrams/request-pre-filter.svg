<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="335px" preserveAspectRatio="none" style="width:445px;height:335px;" version="1.1" viewBox="0 0 445 335" width="445px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rn2443gf40ba" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="209.5" cy="20" fill="#000000" filter="url(#f1rn2443gf40ba)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1rn2443gf40ba)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="253" x="83" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="93" y="71.6016">Read the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="149" y="71.6016">token</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="189" y="71.6016">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="220" y="71.6016">csrf_token</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="289" y="71.6016">cookie</text><rect fill="#FEFECE" filter="url(#f1rn2443gf40ba)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="399" x="10" y="152.6104"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="17" x="20" y="174.2119">Set</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="41" y="174.2119">X-CSRF-Token</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="139" y="174.2119">header for the request with</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="301" y="174.2119">token</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="341" y="174.2119">as a value</text><polygon fill="#FEFECE" filter="url(#f1rn2443gf40ba)" points="164,104.1328,255,104.1328,267,116.1328,255,128.1328,164,128.1328,152,116.1328,164,104.1328" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="213.5" y="138.7676">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="164" y="120.29">token</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="198" y="120.29">is defined?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="267" y="113.8125">no</text><polygon fill="#FEFECE" filter="url(#f1rn2443gf40ba)" points="209.5,206.7432,221.5,218.7432,209.5,230.7432,197.5,218.7432,209.5,206.7432" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1rn2443gf40ba)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="150.5" y="250.7432"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="160.5" y="272.3447">Send the request</text><ellipse cx="209.5" cy="314.876" fill="none" filter="url(#f1rn2443gf40ba)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="210" cy="315.376" fill="#000000" filter="url(#f1rn2443gf40ba)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="30" y2="50"/><polygon fill="#A80036" points="205.5,40,209.5,50,213.5,40,209.5,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="128.1328" y2="152.6104"/><polygon fill="#A80036" points="205.5,142.6104,209.5,152.6104,213.5,142.6104,209.5,146.6104" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="267" x2="419" y1="116.1328" y2="116.1328"/><polygon fill="#A80036" points="415,159.6768,419,169.6768,423,159.6768,419,163.6768" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="419" x2="419" y1="116.1328" y2="218.7432"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="419" x2="221.5" y1="218.7432" y2="218.7432"/><polygon fill="#A80036" points="231.5,214.7432,221.5,218.7432,231.5,222.7432,227.5,218.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="186.7432" y2="206.7432"/><polygon fill="#A80036" points="205.5,196.7432,209.5,206.7432,213.5,196.7432,209.5,200.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="205.5,94.1328,209.5,104.1328,213.5,94.1328,209.5,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="230.7432" y2="250.7432"/><polygon fill="#A80036" points="205.5,240.7432,209.5,250.7432,213.5,240.7432,209.5,244.7432" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="284.876" y2="304.876"/><polygon fill="#A80036" points="205.5,294.876,209.5,304.876,213.5,294.876,209.5,298.876" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start

:Read the **token** from **csrf_token** cookie;

if (**token** is defined?) then (yes)
    :Set **X-CSRF-Token** header for the request with **token** as a value;
else (no)
endif

:Send the request;

stop
@enduml

PlantUML version 1.2018.06(Mon May 21 12:34:53 CEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_121-b13
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>